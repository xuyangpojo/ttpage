# 学习总结

> 北京航空航天大学 27届 软件工程专业(本科) 徐洋

### 接触客户端开发的感受

我之前进行过前端(Vue3)和后端(Java/Go/C++)的开发，第一次接触客户端开发。我发现有些架构知识或编程思想是相通的：

1. **MVVM架构模式**: 后端开发中主要使用MVC架构，前端则由TS+CSS+JS分区负责。客户端与Vue3的响应式数据绑定、Vuex状态管理类似，Android的ViewModel + StateFlow提供了类似的数据驱动UI更新机制。
3. **生命周期管理**: Android的Activity/Fragment生命周期与前端路由守卫、组件挂载/卸载的概念相似。在开发时，需要注意各组件的生命周期逻辑，优化加载与退出流程。

不过，也有一些客户端带给我的独特感受：

1. **手势输入**: Web端常用的用户交互大多是点击与表单提交。在移动端上，还需要考虑用户手势，顺滑切换等代码逻辑，需要用新的思路去思考用户需求。
2. **版本概念**: 由于客户端不在服务器上进行部署，更新回滚不能随时进行，对进度开发的管理有更高的要求。

### 难点记录

##### 1. 双列布局的同步滚动

左右两列因为需要适配高度，所以底层代码上分为两列。但是需求又要两边一起拖动。

最终的实现思路：
- 使用两个独立的`LazyColumn`，分别管理奇偶索引的视频
- 通过`snapshotFlow`监听左侧列表的滚动状态，同步更新右侧列表
- 使用`isSyncingScroll`标志位防止循环触发，避免性能问题
- 使用`coerceIn`确保索引范围有效，避免越界异常

#### 2. 视频的生命周期管理

测试时遇到了上下滑动时，多个视频被同时加载并播放的问题。

最终的实现思路：
- 使用`remember`和`LaunchedEffect`管理ExoPlayer实例
- 通过`DisposableEffect`确保组件销毁时释放播放器资源
- 使用`isVisible`参数控制播放/暂停状态
- 监听播放器状态变化，处理播放结束事件自动切换下一个视频

### 总结
此次客户端训练营给我带来了新的思路与更多的思考，增强了我的代码能力与业务问题分析能力。