# æµ‹è¯•è¯´æ˜æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æœ¬é¡¹ç›®é‡‡ç”¨MVVMæ¶æ„ï¼Œæµ‹è¯•åˆ†ä¸º**å•å…ƒæµ‹è¯•**å’Œ**é›†æˆæµ‹è¯•**ä¸¤éƒ¨åˆ†ã€‚

## ğŸ§ª æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯•ï¼ˆUnit Testsï¼‰
**ä½ç½®**: `app/src/test/java/`

å•å…ƒæµ‹è¯•åœ¨JVMä¸Šè¿è¡Œï¼Œä¸éœ€è¦Androidè®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ï¼Œè¿è¡Œé€Ÿåº¦å¿«ã€‚

#### æµ‹è¯•è¦†ç›–èŒƒå›´ï¼š
- âœ… **Contentæ•°æ®æ¨¡å‹æµ‹è¯•** (`ContentTest.kt`)
  - æµ‹è¯• `hasVideo` å±æ€§çš„å„ç§æƒ…å†µ
  - æµ‹è¯•æ•°æ®æ¨¡å‹çš„å­—æ®µå®Œæ•´æ€§
  - æµ‹è¯•æ•°æ®ç›¸ç­‰æ€§

- âœ… **ContentRepositoryæµ‹è¯•** (`ContentRepositoryTest.kt`)
  - æµ‹è¯•æ•°æ®è·å–åŠŸèƒ½
  - æµ‹è¯•è¿”å›æ•°æ®çš„æœ‰æ•ˆæ€§
  - æµ‹è¯•æ•°æ®å”¯ä¸€æ€§
  - æµ‹è¯•è§†é¢‘ç›¸å…³æ•°æ®

- âœ… **HomeViewModelæµ‹è¯•** (`HomeViewModelTest.kt`)
  - æµ‹è¯•å†…å®¹åŠ è½½åŠŸèƒ½
  - æµ‹è¯•çŠ¶æ€ç®¡ç†ï¼ˆloadingã€errorï¼‰
  - æµ‹è¯•æ ¹æ®IDæŸ¥æ‰¾å†…å®¹
  - æµ‹è¯•é”™è¯¯æ¸…é™¤åŠŸèƒ½

### 2. é›†æˆæµ‹è¯•ï¼ˆIntegration Testsï¼‰
**ä½ç½®**: `app/src/androidTest/java/`

é›†æˆæµ‹è¯•éœ€è¦åœ¨Androidè®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œå¯ä»¥æµ‹è¯•éœ€è¦Android Contextçš„åŠŸèƒ½ã€‚

#### æµ‹è¯•è¦†ç›–èŒƒå›´ï¼š
- âœ… **ResourceHelperæµ‹è¯•** (`ResourceHelperTest.kt`)
  - æµ‹è¯•æœ¬åœ°èµ„æºURIç”Ÿæˆ
  - æµ‹è¯•rawèµ„æºURIæ ¼å¼
  - æµ‹è¯•drawableèµ„æºURIæ ¼å¼
  - æµ‹è¯•ä¸å­˜åœ¨çš„èµ„æºå¤„ç†

- âœ… **UIé›†æˆæµ‹è¯•** (`HomeScreenTest.kt`)
  - æµ‹è¯•Compose UIç»„ä»¶æ˜¾ç¤º
  - æµ‹è¯•åŠ è½½çŠ¶æ€æ˜¾ç¤º

## ğŸ› ï¸ æµ‹è¯•å·¥å…·å’Œä¾èµ–

### æµ‹è¯•æ¡†æ¶
- **JUnit 4** - åŸºç¡€æµ‹è¯•æ¡†æ¶
- **Turbine** - Flowæµ‹è¯•åº“ï¼Œç”¨äºæµ‹è¯•StateFlow
- **MockK** - Kotlin Mockæ¡†æ¶ï¼ˆå·²æ·»åŠ ï¼Œå¯ç”¨äºæœªæ¥æ‰©å±•ï¼‰
- **Kotlinx Coroutines Test** - åç¨‹æµ‹è¯•æ”¯æŒ

### Composeæµ‹è¯•
- **androidx.compose.ui.test** - Compose UIæµ‹è¯•æ¡†æ¶
- **androidx.compose.ui.test.junit4** - Composeæµ‹è¯•JUnit4æ”¯æŒ

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
```bash
./gradlew test
```

### è¿è¡Œæ‰€æœ‰é›†æˆæµ‹è¯•
```bash
./gradlew connectedAndroidTest
```

### è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
åœ¨Android Studioä¸­ï¼š
1. å³é”®ç‚¹å‡»æµ‹è¯•æ–‡ä»¶
2. é€‰æ‹© "Run 'TestClassName'"

### è¿è¡Œå•ä¸ªæµ‹è¯•æ–¹æ³•
åœ¨Android Studioä¸­ï¼š
1. ç‚¹å‡»æµ‹è¯•æ–¹æ³•å·¦ä¾§çš„è¿è¡Œå›¾æ ‡
2. æˆ–å³é”®ç‚¹å‡»æµ‹è¯•æ–¹æ³•ï¼Œé€‰æ‹© "Run"

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡

å½“å‰æµ‹è¯•è¦†ç›–ï¼š
- âœ… Modelå±‚ï¼šContentæ•°æ®æ¨¡å‹
- âœ… Modelå±‚ï¼šContentRepository
- âœ… ViewModelå±‚ï¼šHomeViewModel
- âœ… Utilå±‚ï¼šResourceHelper
- âœ… Viewå±‚ï¼šHomeScreenï¼ˆåŸºç¡€æµ‹è¯•ï¼‰

## ğŸ“ æµ‹è¯•æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‘½å
ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•æ–¹æ³•åï¼Œæ ¼å¼ï¼š`æµ‹è¯•åœºæ™¯_é¢„æœŸç»“æœ`
```kotlin
@Test
fun `getContentById should return correct content`() {
    // æµ‹è¯•ä»£ç 
}
```

### 2. Given-When-Thenæ¨¡å¼
```kotlin
@Test
fun testExample() {
    // Given - å‡†å¤‡æµ‹è¯•æ•°æ®
    val content = Content(...)
    
    // When - æ‰§è¡Œè¢«æµ‹è¯•çš„æ“ä½œ
    val result = viewModel.getContentById("1")
    
    // Then - éªŒè¯ç»“æœ
    assertEquals(content, result)
}
```

### 3. å¼‚æ­¥æµ‹è¯•
ä½¿ç”¨ `runTest` å’Œ `delay` å¤„ç†å¼‚æ­¥æ“ä½œï¼š
```kotlin
@Test
fun `loadContents should populate contents`() = runTest {
    val viewModel = HomeViewModel()
    delay(1000) // ç­‰å¾…å¼‚æ­¥åŠ è½½å®Œæˆ
    
    assertTrue(viewModel.contents.value.isNotEmpty())
}
```

### 4. Flowæµ‹è¯•
ä½¿ç”¨ Turbine æµ‹è¯• StateFlowï¼š
```kotlin
viewModel.contents.test {
    val contents = awaitItem()
    assertTrue(contents.isNotEmpty())
}
```

## ğŸ” è°ƒè¯•æµ‹è¯•

### æŸ¥çœ‹æµ‹è¯•æ—¥å¿—
åœ¨Android Studioçš„Runçª—å£ä¸­æŸ¥çœ‹æµ‹è¯•è¾“å‡ºã€‚

### è°ƒè¯•å¤±è´¥çš„æµ‹è¯•
1. åœ¨æµ‹è¯•æ–¹æ³•ä¸­è®¾ç½®æ–­ç‚¹
2. å³é”®ç‚¹å‡»æµ‹è¯•æ–¹æ³•ï¼Œé€‰æ‹© "Debug"
3. é€æ­¥æ‰§è¡Œä»£ç ï¼ŒæŸ¥çœ‹å˜é‡å€¼

## ğŸ“ˆ æœªæ¥æ‰©å±•

### å¯ä»¥æ·»åŠ çš„æµ‹è¯•ï¼š
1. **Mockæµ‹è¯•**
   - ä½¿ç”¨MockKæ¨¡æ‹ŸRepository
   - æµ‹è¯•ViewModelçš„é”™è¯¯å¤„ç†

2. **UIæµ‹è¯•æ‰©å±•**
   - æµ‹è¯•ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€æ»‘åŠ¨ï¼‰
   - æµ‹è¯•å¯¼èˆªåŠŸèƒ½
   - æµ‹è¯•è§†é¢‘æ’­æ”¾å™¨åŠŸèƒ½

3. **æ€§èƒ½æµ‹è¯•**
   - æµ‹è¯•å¤§æ•°æ®é‡åŠ è½½
   - æµ‹è¯•å†…å­˜æ³„æ¼

4. **ç«¯åˆ°ç«¯æµ‹è¯•**
   - æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹
   - æµ‹è¯•é¡µé¢é—´å¯¼èˆª

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å•å…ƒæµ‹è¯•**è¿è¡Œåœ¨JVMä¸Šï¼Œä¸èƒ½ä½¿ç”¨Android API
2. **é›†æˆæµ‹è¯•**éœ€è¦Androidè®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨
3. æµ‹è¯•ä¸­çš„å¼‚æ­¥æ“ä½œéœ€è¦ä½¿ç”¨ `runTest` å’Œé€‚å½“çš„ç­‰å¾…
4. Composeæµ‹è¯•éœ€è¦ç‰¹å®šçš„æµ‹è¯•è§„åˆ™å’Œè®¾ç½®

## ğŸ“š å‚è€ƒèµ„æº

- [Android Testing Guide](https://developer.android.com/training/testing)
- [JUnit Documentation](https://junit.org/junit4/)
- [Turbine Documentation](https://github.com/cashapp/turbine)
- [Compose Testing](https://developer.android.com/jetpack/compose/testing)

